<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>dsdshome</title>
    <link>http://dsdshcym.github.io</link>
    <description>This is my small blog :)</description>
    <pubDate>Fri, 04 Dec 2015 20:03:58 CST</pubDate>
    <lastBuildDate>Fri, 04 Dec 2015 20:03:58 CST</lastBuildDate>
    <docs>http://www.rssboard.org/rss-specification</docs>
    <generator>Org-page static site generator (https://github.com/kelvinh/org-page)</generator>
    <item>
      <title>A Simple Introduction to Docker III</title>
      <link>http://dsdshcym.github.io/blog/2015/12/04/a-simple-introduction-to-docker-iii</link>
      <description><![CDATA[<div>
<div class="post">
<h1>A Simple Introduction to Docker III</h1>

<div id="outline-container-orgheadline7" class="outline-2">
<h2 id="orgheadline7">What is Docker?</h2>
<div class="outline-text-2" id="text-orgheadline7">
</div><div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">Underlying Techniques</h3>
<div class="outline-text-3" id="text-orgheadline6">
</div><div id="outline-container-orgheadline1" class="outline-4">
<h4 id="orgheadline1">What do we need to do to build a container?</h4>
<div class="outline-text-4" id="text-orgheadline1">
<ol class="org-ol">
<li><p>
Isolate every container
</p>

<p>
We need to isolate every container, which means make a process in a container
(which usualy only has one sigle process) think it is the only process on the
system.
</p>

<p>
To do that, we need to use a technique provided by linux kernel, named
<b>namespace</b>.
</p></li>

<li><p>
Restrict resources a container can use
</p>

<p>
We may need to restrict the resources a container can use since we don't want
to let them to eat up all our system resources such as CPU, RAM, Disks.
</p>

<p>
We may also need to account for the resources a container have used, for
charging or something else.
</p>

<p>
To do that, we need to use <b>cgroups</b> (abbreviated from <b>control groups</b>),
which is a linux kernel feature that limits, accounts for, and isolates the
resource usage of a collection of processes.
</p></li>

<li><p>
Provide these resources wisely
</p>

<p>
We may only have a couple of small, weak devices, but we want to provide
great services. We can use container to combine these devices into one single
device, at least it looks like one. So we can have enough resources we want.
And more importantly, it's scalable.
</p></li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-4">
<h4 id="orgheadline2">Linux Namespace</h4>
<div class="outline-text-4" id="text-orgheadline2">
<ul class="org-ul">
<li>Docker takes advantage of a technology called namespaces to provide the
isolated workspace<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup></li>
<li><p>
Purpose of Namespace
</p>

<p>
To wrap a particular global system resource in an <b>abstraction</b> that makes it
<b>appear to</b> the processes within the namespace that they have their own
<b>isolated</b> instance of the global resource.
</p></li>

<li><p>
6 namespaces
</p>

<p>
There are 6 different types of namespaces. Docker has used five of them, and
is working on the last one (user namespace).
</p>

<dl class="org-dl">
<dt>The pid namespace</dt><dd>Used for process isolation (PID: Process ID).</dd>
<dt>The net namespace</dt><dd>Used for managing network interfaces (NET: Networking).</dd>
<dt>The ipc namespace</dt><dd>Used for managing access to IPC resources (IPC: InterProcess Communication).</dd>
<dt>The mnt namespace</dt><dd>Used for managing mount-points (MNT: Mount).</dd>
<dt>The uts namespace</dt><dd>Used for isolating kernel and version identifiers. (UTS: Unix Timesharing System).</dd>
</dl></li>

<li>Related System Calls
<ul class="org-ul">
<li><p>
<code>clone()</code>
</p>

<p>
Create a new process. And can use different identifiers/flags to isolate
different resources.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Namespaces</td>
<td class="org-left">Identifier</td>
<td class="org-left">Usage</td>
<td class="org-left">Related Kernel Versions</td>
</tr>

<tr>
<td class="org-left">Mount namespaces</td>
<td class="org-left">CLONE_NEWNS</td>
<td class="org-left">Managing mount-points</td>
<td class="org-left">Since Linux 2.4.19</td>
</tr>

<tr>
<td class="org-left">UTS namespaces</td>
<td class="org-left">CLONE_NEWUTS</td>
<td class="org-left">Isolating kernel and version identifiers</td>
<td class="org-left">Since Linux 2.6.19</td>
</tr>

<tr>
<td class="org-left">IPC namespaces</td>
<td class="org-left">CLONE_NEWIPC</td>
<td class="org-left">Managing access to IPC resources</td>
<td class="org-left">Since Linux 2.6.19</td>
</tr>

<tr>
<td class="org-left">PID namespaces</td>
<td class="org-left">CLONE_NEWPID</td>
<td class="org-left">Process isolation</td>
<td class="org-left">Since Linux 2.6.24</td>
</tr>

<tr>
<td class="org-left">Network namespaces</td>
<td class="org-left">CLONE_NEWNET</td>
<td class="org-left">Managing network interfaces</td>
<td class="org-left">Started in Linux 2.6.24 and largely completed by about Linux 2.6.29</td>
</tr>

<tr>
<td class="org-left">User namespaces</td>
<td class="org-left">CLONE_NEWUSER</td>
<td class="org-left">Managing user and group ID</td>
<td class="org-left">Started in Linux 2.6.23 and completed in Linux 3.8</td>
</tr>
</tbody>
</table></li>

<li><p>
<code>unshare()</code>
</p>

<p>
Disassociate parts of a progress's execution context, such as the mount
namespace, that are currently being shared with other processes (or
threads).
</p></li>

<li><p>
<code>setns()</code>
</p>

<p>
Reassociate thread with a namespace
</p></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-4">
<h4 id="orgheadline3">Control groups</h4>
<div class="outline-text-4" id="text-orgheadline3">
<blockquote>
<p>
Control groups allow Docker to share available hardware resources to containers
and, if required, set up limits and constraints.<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup>
</p>
</blockquote>

<ul class="org-ul">
<li>Features
<ul class="org-ul">
<li>Resource limitation</li>
<li>Prioritization</li>
<li>Accounting</li>
<li>Control</li>
</ul></li>
<li>CPU Restrictions
<ul class="org-ul">
<li>Example

<ol class="org-ol">
<li>mount cgroups
<ul class="org-ul">
<li><p>
You can see your mounted cgroups using this command
</p>
<div class="org-src-container">

<pre class="src src-sh">mount -t cgroup
</pre>
</div>

<pre class="example">
systemd on /sys/fs/cgroup/systemd type cgroup (rw,noexec,nosuid,nodev,none,name=systemd)
cpuset on /sys/fs/cgroup/cpuset type cgroup (rw,cpuset)
cpu on /sys/fs/cgroup/cpu type cgroup (rw,cpu)
memory on /sys/fs/cgroup/memory type cgroup (rw,memory)
</pre></li>

<li><p>
If you can't see them, you can mount them by your self
</p>
<div class="org-src-container">

<pre class="src src-sh">sudo mkdir cgroup
sudo mount -t tmpfs cgroup_root ./cgroup
sudo mkdir cgroup/cpuset
sudo mount -t cgroup -ocpuset cpuset ./cgroup/cpuset/
sudo mkdir cgroup/cpu
sudo mount -t cgroup -ocpu cpu ./cgroup/cpu/
sudo mkdir cgroup/memory
sudo mount -t cgroup -omemory memory ./cgroup/memory/
</pre>
</div></li>

<li><p>
Then you can see config files under these directory
</p>
<div class="org-src-container">

<pre class="src src-sh">ls /sys/fs/cgroup/cpu /sys/fs/cgroup/cpuset/
</pre>
</div>

<pre class="example">
/sys/fs/cgroup/cpu:
cgroup.clone_children  cpu.cfs_period_us  cpu.shares       release_agent
cgroup.procs         cpu.cfs_quota_us   cpu.stat       tasks
cgroup.sane_behavior   cpu_group    notify_on_release

/sys/fs/cgroup/cpuset/:
cgroup.clone_children cpuset.memory_pressure_enabled
cgroup.procs    cpuset.memory_spread_page
cgroup.sane_behavior  cpuset.memory_spread_slab
cpuset.cpu_exclusive  cpuset.mems
cpuset.cpus   cpuset.sched_load_balance
cpuset.mem_exclusive  cpuset.sched_relax_domain_level
cpuset.mem_hardwall notify_on_release
cpuset.memory_migrate release_agent
cpuset.memory_pressure  tasks
</pre></li>
</ul></li>

<li><p>
Create a cpu group
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir /sys/fs/cgroup/cpu/temp
</pre>
</div></li>

<li>Running a process in a cpu group
<ul class="org-ul">
<li><p>
C program
</p>
<div class="org-src-container">

<pre class="src src-c">/* deadloop.c */
int main(void) {
    int i = 0;
    for(;;) i++;
    return 0;
}
</pre>
</div></li>
<li><p>
<code>top</code> results
</p>

<p>
We can see in the result table below that the CPU usage of this process
is almost 100%.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">PID</td>
<td class="org-left">USER</td>
<td class="org-right">PR</td>
<td class="org-right">NI</td>
<td class="org-right">VIRT</td>
<td class="org-right">RES</td>
<td class="org-right">SHR</td>
<td class="org-left">S</td>
<td class="org-right">%CPU</td>
<td class="org-right">%MEM</td>
<td class="org-right">TIME+</td>
<td class="org-left">COMMAND</td>
</tr>

<tr>
<td class="org-right">107539</td>
<td class="org-left">dsdshcym</td>
<td class="org-right">20</td>
<td class="org-right">0</td>
<td class="org-right">4196</td>
<td class="org-right">628</td>
<td class="org-right">548</td>
<td class="org-left">R</td>
<td class="org-right">99.8</td>
<td class="org-right">0.1</td>
<td class="org-right">0:09.80</td>
<td class="org-left">deadloop</td>
</tr>
</tbody>
</table></li>
<li>Restrict CPU usage
<ol class="org-ol">
<li><p>
Restrict a cgroup's CPU usage
</p>
<div class="org-src-container">

<pre class="src src-sh">cat /sys/fs/cgroup/cpu/temp/cpu.cfs_quota_us
echo 20000 &gt; /sys/fs/cgroup/cpu/temp/cpu.cfs_quota_us
cat /sys/fs/cgroup/cpu/temp/cpu.cfs_quota_us
</pre>
</div>

<pre class="example">
-1
25000
</pre></li>

<li><p>
Add the process to a cgroup
</p>
<div class="org-src-container">

<pre class="src src-sh"># Add the process's pid to the cgroup's tasks file
echo 107539 &gt;&gt; /sys/fs/cgroup/cpu/temp/tasks
</pre>
</div></li>
<li><p>
<code>top</code> results
</p>

<p>
As we can see in the results below, the CPU usage have dropped down
to about 20%, which was set by the value 20000 in the
<code>cpu.cfs_quota_us</code> file.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">PID</td>
<td class="org-left">USER</td>
<td class="org-right">PR</td>
<td class="org-right">NI</td>
<td class="org-right">VIRT</td>
<td class="org-right">RES</td>
<td class="org-right">SHR</td>
<td class="org-left">S</td>
<td class="org-right">%CPU</td>
<td class="org-right">%MEM</td>
<td class="org-right">TIME+</td>
<td class="org-left">COMMAND</td>
</tr>

<tr>
<td class="org-right">107539</td>
<td class="org-left">dsdshcym</td>
<td class="org-right">20</td>
<td class="org-right">0</td>
<td class="org-right">4196</td>
<td class="org-right">628</td>
<td class="org-right">548</td>
<td class="org-left">R</td>
<td class="org-right">19.9</td>
<td class="org-right">0.1</td>
<td class="org-right">1:25.30</td>
<td class="org-left">deadloop</td>
</tr>
</tbody>
</table></li>
</ol></li>
</ul></li>
</ol></li>
</ul></li>
<li>Memory Restrictions</li>
<li>IO Speed Restrictions</li>
<li>Disk Capacity Restrictions</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4">Union File Systems</h4>
<div class="outline-text-4" id="text-orgheadline4">
<blockquote>
<p>
Docker uses union file systems to provide the building blocks for
containers.<sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup>
</p>
</blockquote>

<ul class="org-ul">
<li><p>
UFS
</p>

<p>
Unionfs is a filesystem service for Linux, FreeBSD and NetBSD which implements a
union mount for other file systems. It allows files and directories of separate
file systems, known as branches, to be transparently overlaid, forming a single
coherent file system. Contents of directories which have the same path within
the merged branches will be seen together in a single merged directory, within
the new, virtual filesystem.
</p></li>

<li><p>
Usage in docker
</p>

<p>
Each Docker image consists of a series of layers. Docker makes use of union
file systems to combine these layers into a single image.
</p></li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline5"></a>AUFS<br  /><div class="outline-text-5" id="text-orgheadline5">
<ul class="org-ul">
<li><p>
Prepare
</p>
<div class="org-src-container">

<pre class="src src-sh">tree
</pre>
</div>

<pre class="example">
.
|-- fruits
|   |-- apple
|   `-- tomato
`-- vegetables
    |-- carrots
    `-- tomato

2 directories, 4 files
</pre></li>

<li><p>
Mount
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir mnt
sudo mount -t aufs -o dirs=./fruits:./vegetables none ./mnt
tree ./mnt
</pre>
</div>

<pre class="example">
./mnt
|-- apple
|-- carrots
`-- tomato

0 directories, 3 files
</pre></li>

<li><p>
Modify
</p>
<div class="org-src-container">

<pre class="src src-sh">echo mnt_carrots &gt; ./mnt/carrots
</pre>
</div>

<ul class="org-ul">
<li><p>
results in vegetables
</p>

<div class="org-src-container">

<pre class="src src-sh">cat ./vegetables/carrots
</pre>
</div></li>

<li><p>
results in fruits
</p>

<div class="org-src-container">

<pre class="src src-sh">cat ./fruits/carrots
</pre>
</div>

<pre class="example">
mnt_carrots
</pre></li>
</ul></li>
</ul>
</div></li></ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://docs.docker.com/introduction/understanding-docker/#the-underlying-technology">The underlying technology of Docker</a>
</p></div></div>


</div>
</div>
</div>
</div>]]></description>
      <pubDate>2015-12-04</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/12/04/a-simple-introduction-to-docker-iii</guid>
    </item>
    <item>
      <title>A Simple Introduction to Docker II</title>
      <link>http://dsdshcym.github.io/blog/2015/11/26/a-simple-introduction-to-docker-ii</link>
      <description><![CDATA[<div>
<div class="post">
<h1>A Simple Introduction to Docker II</h1>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">What is Docker?</h2>
<div class="outline-text-2" id="text-orgheadline1">
<ul class="org-ul">
<li>Docker is a container implementation written in Go language.</li>
<li>It's the most popular container implementations nowadays.</li>
<li>It has the largest developer community out there,
which means you can find the best documentations here.</li>
</ul>

<p>
We now use docker as a example to illustrate how container works.
</p>
</div>
<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">Typical Use Cases</h3>
<div class="outline-text-3" id="text-orgheadline2">
<ul class="org-ul">
<li>Development Environments Configuration</li>
<li>Build Microservices</li>
<li>Distributed System
<ul class="org-ul">
<li><p>
Docker Swarm
</p>

<p>
Recently, Docker 1.9 was released. And a feature named Docker Swarm got out of
beta and is ready for production usages. We will give it a brief introduction
here.
</p></li>

<li>Swarm in general
<ul class="org-ul">
<li>Turns a set of Docker Engines into a single pool of resources</li>
<li>Supports the Docker RESTful API (99%)</li>
<li>Resource Management (CPU, Memory, Networking)</li>
<li>Advanced scheduling with constraints and affinities</li>
<li>Multiple Discovery Backends (hub, etcd, consul, zookeeper)</li>
<li>TLS: Encryption and Authentication</li>
<li>Multi Tenancy / Leader Election</li>
</ul></li>
<li>Usages
<ul class="org-ul">
<li>Build a overlay for a pool of Docker Engines</li>
<li>Combine thest Docker Engines into a single virtual Engine</li>
<li><p>
Use this engine as a normal Docker engine
</p>

<p>
Since they have almost the same API
</p></li>

<li>Provide distributed computing or data storage</li>
<li><p>
Swarm is ready for running production apps
</p>
<blockquote>
<p>
In Docker's tests, Swarm can run with 1,000 nodes and 30,000 containers on EC2
and it keeps on scheduling containers in less than half a second.
</p>
</blockquote></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">How popular is Docker?</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
First of all, let's see how popular is docker nowadays.
</p>
</div>
<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4">A Quick Peek at Real Docker Adoption</h4>
<div class="outline-text-4" id="text-orgheadline4">
<p>
Here are the results of a survey from a monitoring startup Datadog.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>

<ul class="org-ul">
<li>Real Docker Adoption Is Up 5x in One Year</li>
<li>Docker Now Runs on 6% of the Hosts We Monitor</li>
<li>Larger Companies Are the Early Adopters</li>
<li>2/3 of Companies That Try Docker Adopt It</li>
<li>Users Triple the Number of Containers They Use within 5 Months</li>
<li>The Most Widely Used Images Are Registry, NGINX, and Redis</li>
<li>Docker Hosts Often Run  Four Containers at a Time</li>
<li>VMs Live 4x Longer Than Containers</li>
</ul>

<p>
From this survey, we can know that docker is growing really fast in the last
year. And it's widely used to provide web services.
</p>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5">Real World Applications</h4>
<div class="outline-text-4" id="text-orgheadline5">
<ul class="org-ul">
<li>Used widely in productions
<ul class="org-ul">
<li><p>
Google
</p>
<blockquote>
<p>
Indeed, few of you know it, but most of you have been using containers for
years. Google has its own open-source, container technology
<a href="http://www.linuxplumbersconf.org/2013/ocw//system/presentations/1239/original/lmctfy%20(1).pdf">lmctfy (Let Me Contain That For You)</a>. Anytime you use some of Google
functionality — Search, Gmail, Google Docs, whatever — you're issued a new
container.<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>
</p>
</blockquote></li>
<li>Baidu</li>
<li>Uber</li>
<li>PayPal</li>
</ul></li>
<li>Paas
<ul class="org-ul">
<li>IBM BlueMix<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></li>
<li>Coding.net</li>
<li>Daocloud</li>
<li><a href="https://c.163.com/">网易蜂巢</a></li>
</ul></li>
<li>Personal projects using docker to diliver
<ul class="org-ul">
<li><a href="http://modo.moe/">http://modo.moe/</a></li>
<li>etc.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6">Docker can even run on ARM platforms</h4>
<div class="outline-text-4" id="text-orgheadline6">
<ul class="org-ul">
<li><a href="http://blog.hypriot.com/getting-started-with-docker-on-your-arm-device/">Getting started with Docker on your Raspberry Pi</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">How to use Docker?</h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
Docker has a really good documentation. You can find almost anything you need to
know about how to use Docker at <a href="http://docs.docker.com/">Docker Docs</a>. Here, we will use a example from
this doc to show you some basic Docker commands.
</p>
</div>
<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8">Using Docker in China</h4>
<div class="outline-text-4" id="text-orgheadline8">
<p>
I suggest to use a docker hub mirror in china to download docker images.
Otherwise you can hardly download an image file. You can find some information
about the docker hub mirror <a href="http://dockone.io/article/160">here</a>.
</p>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9">Download and Run a Image</h4>
<div class="outline-text-4" id="text-orgheadline9">
<div class="org-src-container">

<pre class="src src-sh">docker run docker/whalesay cowsay foo bar
</pre>
</div>

<pre class="example">
 _________
&lt; foo bar &gt;
 ---------
     \
     \
       \
 #        .
 # ## ##       ==
 # ## ## ##      ===
       /""""""""""""""""___/ ===
   ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~
       \______ o          __/
         \    \        __/
           \____\______/
</pre>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10">Build a Custom Image</h4>
<div class="outline-text-4" id="text-orgheadline10">
<ul class="org-ul">
<li>Dockerfile Docker can build images automatically by reading the instructions
from a <code>Dockerfile</code>, a text file that contains all the commands, in order,
needed to build a given image. You can read more about Dockerfile <a href="http://docs.docker.com/engine/reference/builder/">here</a>.
<ul class="org-ul">
<li><p>
Example
</p>
<div class="org-src-container">

<pre class="src src-dockerfile">FROM nginx
# RUN apt-get -y update &amp;&amp; apt-get install -y xxx
COPY *.html /usr/share/nginx/html/
</pre>
</div></li>
<li><p>
Build a image using Dockerfile
</p>
<div class="org-src-container">

<pre class="src src-sh">docker build -t nginx-test .
</pre>
</div></li>
<li><p>
Use this image
</p>
<div class="org-src-container">

<pre class="src src-sh">docker run --name simple_html -d -p 80:80 -p 443:443 nginx_test
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11">Bonus</h4>
<div class="outline-text-4" id="text-orgheadline11">
<ul class="org-ul">
<li><a href="https://github.com/docker/dockercraft">docker/dockercraft</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.datadoghq.com/docker-adoption/">8 surprising facts about real Docker adoption - Datadog</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.zdnet.com/article/what-is-docker-and-why-is-it-so-darn-popular/">What is Docker and why is it so darn popular? | ZDNet</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://www.ibm.com/cloud-computing/bluemix/">IBM Bluemix - Create, Deploy, Manage Your Applications in the Cloud</a>
</p></div></div>


</div>
</div>
</div>
</div>]]></description>
      <pubDate>2015-11-26</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/11/26/a-simple-introduction-to-docker-ii</guid>
    </item>
    <item>
      <title>My Ideal Editor</title>
      <link>http://dsdshcym.github.io/blog/2015/11/20/my-ideal-editor</link>
      <description><![CDATA[A simple explaination of my ideal text editor]]></description>
      <pubDate>2015-11-20</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/11/20/my-ideal-editor</guid>
    </item>
    <item>
      <title>A Simple Introduction to Docker I</title>
      <link>http://dsdshcym.github.io/blog/2015/11/13/a-simple-introduction-to-docker-i</link>
      <description><![CDATA[<div>
<div class="post">
<h1>A Simple Introduction to Docker I</h1>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Why do we need Virtualization?</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
I believe everyone have used a virtual machine before. And I think you know how
convenient a virtual machine is under a personal usage sceanario. Here, we
mainly focus on the power of virtualization on the server side.
</p>
</div>
<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">Snapshots</h3>
<div class="outline-text-3" id="text-orgheadline2">
<p>
Imagine how much work you need to do to backup a physical machine.
</p>

<p>
A snapshot is the state of a virtual machine at an exact time point. You can
create a snapshot for a virtual machine in minutes.
</p>

<p>
We can use this snapshot as a <b>backup</b>. So that we can restore it on almost any
machine we want. This is a really useful backup technique.
</p>

<p>
Further more, it provides more convenience to <b>migrate</b> a virtual machine to
another host.
</p>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">Isolation</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
In the real world, we often isolate apps that we want to run to provide more
reliabilities. If an app fails, it won't cause any effect to any other apps,
except for some errors.
</p>

<p>
Imagine again, how many machines do you need to provide isolated apps for a
website.
</p>

<p>
In the virtualization world, you can just put these apps into several different
virtual machines.
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">Cost/Energy Saving</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
Since we can provide isolation via virtualization, we can use a single machine
to provide same functionality as hundreds physical machines thanks to the
powerful enough compute abilities a PC can provide nowadays.
</p>

<p>
Thus we can save our unneeded cost on these physical machines.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5">What's the Container?</h2>
<div class="outline-text-2" id="text-orgheadline5">
</div>
<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">Operating-system-level virtualization</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
Container, also called operating-system-level virtualization, is a
server-virtualization method where the kernel of an operating system allows
for multiple isolated user-space instances, instead of just one. Such
instances may look and feel like a real server from the point of view of its
owners and users.
</p>

<ul class="org-ul">
<li>Container is an instance of Operating-System-Level Virtualization</li>
<li>Docker and LXC are both implementations of Operating-System-Level
Virtualization</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">Compare with VM</h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
Basically, a container is way more lightweight than a virtual machine. Thus, it
can boot more quickly, use CPU and RAM more efficiently and have smaller image
size.
</p>

<ul class="org-ul">
<li><p>
Structure differences
</p>

<p>
We can show the structure differences using these two pictures:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Virtual Machine</td>
<td class="org-left">Container</td>
</tr>

<tr>
<td class="org-left"><img src="https://www.docker.com/sites/default/files/what-is-docker-diagram.png" alt="what-is-docker-diagram.png" /></td>
<td class="org-left"><img src="https://www.docker.com/sites/default/files/what-is-vm-diagram.png" alt="what-is-vm-diagram.png" /></td>
</tr>
</tbody>
</table></li>

<li><p>
Feature differences
</p>

<p>
We now illustrate the difference between a virtual machine and a container using
this table below:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Container</td>
<td class="org-left">VM</td>
</tr>

<tr>
<td class="org-left">Interfaces</td>
<td class="org-left">Directly Access</td>
<td class="org-left">Emulate</td>
</tr>

<tr>
<td class="org-left">OS</td>
<td class="org-left">Mainly Linux (Why?)</td>
<td class="org-left">Almost any OS</td>
</tr>

<tr>
<td class="org-left">Running Level</td>
<td class="org-left">Kernel level</td>
<td class="org-left">User level</td>
</tr>

<tr>
<td class="org-left">Isolation Strategy</td>
<td class="org-left">CGroups</td>
<td class="org-left">Hypervisor</td>
</tr>

<tr>
<td class="org-left">CPU Resources</td>
<td class="org-left">0-5%</td>
<td class="org-left">5-15%</td>
</tr>

<tr>
<td class="org-left">Boot Speed</td>
<td class="org-left">Seconds</td>
<td class="org-left">Minutes</td>
</tr>

<tr>
<td class="org-left">Image Sizes</td>
<td class="org-left">KB-MB</td>
<td class="org-left">GB-TB</td>
</tr>

<tr>
<td class="org-left">Cluster Sizes</td>
<td class="org-left">Over 10,000</td>
<td class="org-left">Hundreds</td>
</tr>

<tr>
<td class="org-left">HA (High Availability)</td>
<td class="org-left">Elastic Load, Dynamic Load</td>
<td class="org-left">Backup, Restore</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8">Why can a container be so lightweight?</h4>
<div class="outline-text-4" id="text-orgheadline8">
<p>
Containers include the application and all of its dependencies, but share the
kernel with other containers. They run as an isolated process in userspace on
the host operating system. They're also not tied to any specific infrastructure
</p>

<p>
And because the kernel running in a container is the same as the hosts.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
You can run different Linux distributions in the container. Since they are using
the same kernel.
</p>

<p>
For virtual machines, they all includes the application, the necessary binaries
and libraries and an entire guest operating system - all of which may be tens of
GBs in size.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12">How does container help you build better software?</h3>
<div class="outline-text-3" id="text-orgheadline12">
</div><div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9">Eliminate Environment Inconsistencies</h4>
<div class="outline-text-4" id="text-orgheadline9">
<p>
You can package your container into one little config file. And it can run on
another machine as the way you want it to. So you don't need to spend extra time
to install package A, B, C, D... in your test machine or even working machine.
</p>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10">Accelerate Developer Onboarding</h4>
<div class="outline-text-4" id="text-orgheadline10">
<p>
You can just give your new partner a container config file. And he can run it on
his machine without any problems. Then he can start to work. It just works.
</p>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11">Empower Developer Creativity</h4>
<div class="outline-text-4" id="text-orgheadline11">
<p>
You don't need to worry about what language you should use. You can use any
language you want in a container, as long as you provide a simple API through
this container. And this will not cause any conflicts.
</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://stackoverflow.com/questions/25444099/why-docker-has-ability-to-run-different-linux-distribution">Why docker has ability to run different linux distribution? - Stack Overflow</a>
</p></div></div>


</div>
</div>
</div>
</div>]]></description>
      <pubDate>2015-11-13</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/11/13/a-simple-introduction-to-docker-i</guid>
    </item>
    <item>
      <title>Emacs 25 compiled file conflicts with Emacs 24</title>
      <link>http://dsdshcym.github.io/blog/2015/11/06/emacs-25-compiled-file-conflicts-with-emacs-24</link>
      <description><![CDATA[Don't use multiple versions of Emacs on the same machine]]></description>
      <pubDate>2015-11-06</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/11/06/emacs-25-compiled-file-conflicts-with-emacs-24</guid>
    </item>
    <item>
      <title>Answers for Liqi Problems</title>
      <link>http://dsdshcym.github.io/blog/2015/10/30/answers-for-liqi-problems</link>
      <description><![CDATA[<div>
<div class="post">
<h1>Answers for Liqi Problems</h1>
<p>
这篇博客是根据利器的 6 个问题写就的，我觉得根据这 6 个问题能很好地了解一个互联网
工作者，因此也拿来当作介绍自己的一个方式了。
</p>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">介绍一下你自己和所做的工作。</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
我是 dsdshcym ，现在在上海五角场某大学张江分校读本科。
</p>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6">你都在使用哪些硬件？</h2>
<div class="outline-text-2" id="text-orgheadline6">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">OnePlus Two</h3>
<div class="outline-text-3" id="text-orgheadline2">
<p>
之前用的是 Nexus 4 ，从此走上了原生系统的康庄大道，可惜屏幕被我摔碎了，刚好
OnePlus Two 出了，又能刷接近原生的 Oxygen OS ，就果断入手了一个。结果现在苦等
Marshmallow 中。
</p>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">MacBook Pro (Retina, 13-inch, Late 2013)</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
当时买的比较早，记得买了不久以后就出了小升级款，再不久，续航又从 8h 提高到了 10h
，虽然后悔没买对时机，但是更后悔的是没有更早买 MacBook ，码农生涯被这台 MacBook
彻底改变了。
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">红轴 Poker II</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
女朋友送的生日礼物。
</p>

<p>
唯一的缺点是没有 HHKB 那样的脚架，放到 MacBook 的上用会压到 MacBook 自带的键盘。
</p>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">Kindle Paperwhite 3</h3>
<div class="outline-text-3" id="text-orgheadline5">
<p>
刚买来不到一个月，买之前各种担心看 pdf 不够方便，但是拿到手后十分满意。不仅可以
看书，还可以把 Tl;dr 的文章推送到上面睡前读一读。而且 Kindle 的 Vocabulary
Builder 是我用过的最好的生词本软件（同时记录 Definition 和 Usage ）
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-2">
<h2 id="orgheadline12">软件呢？</h2>
<div class="outline-text-2" id="text-orgheadline12">
</div><div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">Emacs</h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
刚开始用了半年 Vim ，然后发现了 <a href="https://github.com/syl20bnr/spacemacs">Spacemacs</a> 项目，便转用 Emacs ，现在已经快一年了。
Coding, Version-Control, Documentation, GTD, Email 都在 Emacs 里完成。如果 Mac
上只能留一个程序，我肯定是选 Emacs 。
</p>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8">Org-mode</h3>
<div class="outline-text-3" id="text-orgheadline8">
<p>
经常拿来与 Markdown 作对比，但是这显然对 Org-mode 是不公平的，因为它比 Markdown
强太多了。Org-mode 无论是写文档还是写论文都没有问题。而且不仅是一个标记语言，还
是强大的 GTD 工具。我一天的大部分时间在干什么都由它来记录、安排。
</p>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9">Telegram</h3>
<div class="outline-text-3" id="text-orgheadline9">
<p>
虽然在 Telegram 上有联系的只有两三个好友，但是它作为一个 IM 工具绝对比微信称职。
</p>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10">Inoreader / Reeder (iOS) / News (Android)</h3>
<div class="outline-text-3" id="text-orgheadline10">
<p>
比 Feedly 好出很多的 RSS 服务提供商，在 iOS 上搭配 Reeder 简直完美，在 Android
上就没有那么好的 App 支持了，毕竟 Press 很久没更新了，只能退而求其次搭配 News
（不是 Apple News ）使用，体验还不错，至少不会像官方客户端一样让人完全用不下去。
</p>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">Dash</h3>
<div class="outline-text-3" id="text-orgheadline11">
<p>
Mac 上最好的文档工具，出 Dash 3 的时候趁降价入了正版。
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">你最理想的工作环境是什么？</h2>
<div class="outline-text-2" id="text-orgheadline16">
</div><div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13">优秀的网络环境</h3>
<div class="outline-text-3" id="text-orgheadline13">
<ul class="org-ul">
<li>没有 GFW</li>
<li>没有 GFW</li>
<li>没有 GFW</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">安静</h3>
</div>
<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">其他的等有工作体验了再加吧</h3>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-2">
<h2 id="orgheadline17">你平时获得工作灵感的方式有哪些？</h2>
<div class="outline-text-2" id="text-orgheadline17">
<p>
谈不上工作灵感，就说如何放松吧
</p>
<ol class="org-ol">
<li>刷 RSS</li>
<li>听 Podcast</li>
<li>跑步，跳绳</li>
</ol>
</div>
</div>
<div id="outline-container-orgheadline19" class="outline-2">
<h2 id="orgheadline19">推荐一件生活中的利器给大家。</h2>
<div class="outline-text-2" id="text-orgheadline19">
</div><div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">跳绳</h3>
<div class="outline-text-3" id="text-orgheadline18">
<p>
不到十块钱一根，每两天跳 20 分钟，非常容易坚持，效果很好。
</p>

<blockquote>
<p>
本文参与了「利器社群计划」，发现更多创造者和他们的工具：
<a href="http://liqi.io/community/">http://liqi.io/community/</a>
</p>
</blockquote>
</div>
</div>
</div>

</div>
</div>]]></description>
      <pubDate>2015-10-30</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/10/30/answers-for-liqi-problems</guid>
    </item>
    <item>
      <title>Why Blog?</title>
      <link>http://dsdshcym.github.io/blog/2015/10/30/why-blog</link>
      <description><![CDATA[Why I'm writting this blog]]></description>
      <pubDate>2015-10-30</pubDate>
      <guid>http://dsdshcym.github.io/blog/2015/10/30/why-blog</guid>
    </item>
  </channel>
</rss>