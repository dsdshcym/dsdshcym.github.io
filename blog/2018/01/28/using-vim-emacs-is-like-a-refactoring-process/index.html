<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>Using Vim/Emacs is like a refactoring process - dsdshome</title>
  <meta charset="utf-8" />
  <meta name="author" content="Yiming Chen" />
  <meta name="keywords" content="Vim, Emacs, Refactor, Text Editor" />

  <link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">
  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/posts.css" type="text/css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
</head>

  <body class="container">
<header id="header">
    <body>
        <nav class="navbar navbar-default navbar-fixed-top" style="opacity: .9" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">dsdshome</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/clipping/">Clipping</a></li>
                        <li><a href="/tags/">Tags</a></li>
                        <li><a href="/about/">About</a></li>
                        <li><a href="https://github.com/dsdshcym">GitHub</a></li>
                        <li><a href="/rss.xml">RSS</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </body>
</header>

<section id="content" role="main">
    <div id="outline-container-sec-" class="row" style="padding-top: 70px">
        <div class="col-md-2"></div>
            <h1>Using Vim/Emacs is like a refactoring process</h1>
            <p>
This is an idea I got when I was still using vim, and I think this feeling got
stronger after I switched to Emacs. It's a bit hard to find out if anyone had
similar idea before, because googling "Vim/Emacs Refactoring" would only show
some refactoring plugins or packages. So I decided to write it down and share
it.
</p>

<div id="outline-container-orgbe2fbd3" class="outline-2">
<h2 id="orgbe2fbd3">Refactoring what?</h2>
<div class="outline-text-2" id="text-orgbe2fbd3">
<p>
The definition of refactoring is:
</p>
<blockquote>
<p>
Restructuring the existing code without changing its behavior.
</p>
</blockquote>
<p>
So what are we restructuring here by using Vim/Emacs? I think it's our <b>text
editing skills</b>.
</p>

<p>
It's kind of obvious since they are both text editors. But they are so powerful
that:
</p>
<ol class="org-ol">
<li>They can abstract text editing to a higher level.</li>
<li>We can then think of the editing process as a piece of code.</li>
<li>After that, we can refactor this code to make it more efficient.</li>
</ol>
</div>
</div>

<div id="outline-container-orgab48e13" class="outline-2">
<h2 id="orgab48e13">Minimize key strokes in vim</h2>
<div class="outline-text-2" id="text-orgab48e13">
</div>
<div id="outline-container-org11313d9" class="outline-3">
<h3 id="org11313d9">Find more efficient keys</h3>
<div class="outline-text-3" id="text-org11313d9">
<p>
In vim, we do most of our text editing in the normal mode thanks to its powerful
modal editing. Each key is bound to an action, e.g. h/j/k/l is
left/down/up/right.
</p>

<p>
I believe most people just uses hjkl to move around the cursor when they just
starts learning Vim. But it's not that efficient and it's still thinking in the
normal text editor's way.
</p>

<p>
Turns out you can move your cursor by using other keys<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>:
</p>
<ul class="org-ul">
<li>Use <code>w</code>, <code>b</code>, <code>e</code>, and <code>ge</code> to move between words</li>
<li>Use <code>f</code>, <code>F</code>, <code>t</code>, <code>T</code>, <code>;</code> to move within the same line</li>
<li>Use <code>{</code>, <code>}</code>, <code>(</code>, <code>)</code> to jump between paragraphs, sentences</li>
<li>Use <code>/</code>, <code>n</code>, <code>N</code> to search texts directly</li>
</ul>
</div>
</div>
<div id="outline-container-org5274ccc" class="outline-3">
<h3 id="org5274ccc">Operate on text objects</h3>
<div class="outline-text-3" id="text-org5274ccc">
<p>
Keys can be combined together to define the action target (text objects), e.g.
<code>d</code> is for deletion, <code>i</code> is for inner, <code>p</code> is for paragraph, <code>dip</code> is deleting
all texts inner this paragraph.
</p>

<p>
These habits changes are like replacing a <code>for-loop</code> with a more efficient
native function. After you get familiar with it, your text editing will
definitely be more efficient.
</p>
</div>
</div>
<div id="outline-container-org21f1242" class="outline-3">
<h3 id="org21f1242">Recording keystrokes in macros</h3>
<div class="outline-text-3" id="text-org21f1242">
<p>
Macro is one of the most powerful things provided by Vim. You can define a macro
and save you hundreds and thousands of keystrokes.
</p>

<p>
But the more powerful feature is that you can edit an macro like editing a piece
of code<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>.
</p>
<ul class="org-ul">
<li>Macros are also saved in (paste) registers.</li>
<li>So you can paste a macro into a buffer then edit it and save it into the
register.</li>
<li>Furthermore, you can save this macro as a function in your rc file and use it
in the future.</li>
</ul>

<p>
This makes using macro more like refactoring, because once you find a way to
generalize your operations on texts, you can record it as a macro and even edit
it as editing your code.
</p>
</div>
</div>
</div>
<div id="outline-container-org949d7b3" class="outline-2">
<h2 id="org949d7b3">Minimize function calls in Emacs</h2>
<div class="outline-text-2" id="text-org949d7b3">
</div>
<div id="outline-container-org3d9a50e" class="outline-3">
<h3 id="org3d9a50e">Everything is a function</h3>
<div class="outline-text-3" id="text-org3d9a50e">
<p>
This was a mind-blown point to me: <b>in Emacs, every operation is a function.</b>
Even typing a key and inserting the character on it is also a function called
<code>self-insert-command</code>.
</p>

<p>
This turns your text editing process into a coding process: you are writing a
code to write the code you want to write. (Meta-Programming!)
</p>
</div>
</div>
<div id="outline-container-orgb0778a0" class="outline-3">
<h3 id="orgb0778a0">Macro can be turned into function</h3>
<div class="outline-text-3" id="text-orgb0778a0">
<p>
Native Emacs records a keyboard macro like Vim does: just saving the keystrokes.
But it provides a better editing environment for keyboard macros and you can
even see which function each key represents:
</p>
<pre class="example">
;; Keyboard Macro Editor.  Press C-c C-c to finish; press C-x k RET to cancel.
;; Original keys: SPC w l SPC w h SPC w s SPC w k

Command: last-kbd-macro
Key: none

Macro:

SPC w l			;; evil-window-right
SPC w h			;; evil-window-left
SPC w s			;; evil-window-split
SPC w k			;; evil-window-up
</pre>

<p>
And there is a package elmacro<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> that allows you to translate a keyboard macro directly
into elisp function.
</p>
</div>
</div>
</div>
<div id="outline-container-orgd1b9477" class="outline-2">
<h2 id="orgd1b9477">Summary</h2>
<div class="outline-text-2" id="text-orgd1b9477">
<ol class="org-ol">
<li>Find a more efficient native function to do the work</li>
<li>Automate things by keyboard macros</li>
<li>Persist macros into functions in your config file</li>
</ol>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
These tips are mostly collected from <a href="http://vimcasts.org/blog/2013/02/habit-breaking-habit-making/">Habit breaking, habit making</a> and
some of them are
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://robots.thoughtbot.com/how-to-edit-an-existing-vim-macro">How to Edit an Existing Vim Macro</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/Silex/elmacro">Silex/elmacro: Package to display keyboard macros or latest interactive
commands as emacs lisp.</a>
</p></div></div>


</div>
</div>
    </div>
</section>


    <div class="post-meta">
        <span title="post date" class="post-info">2018-01-28</span>
        <span title="last modification date" class="post-info">2018-01-28</span>
        <span title="tags" class="post-info"><a href="/tags/vim/">Vim</a>, <a href="/tags/emacs/">Emacs</a>, <a href="/tags/refactor/">Refactor</a></span>
        <span title="author" class="post-info">Yiming Chen</span>
    </div>
  <section>
    <h1>Comments</h1>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
       //var disqus_developer = 1;
       var disqus_identifier = "/blog/2018/01/28/using-vim-emacs-is-like-a-refactoring-process";
       var disqus_url = "http://dsdshcym.github.io/blog/2018/01/28/using-vim-emacs-is-like-a-refactoring-process";
       var disqus_shortname = 'dsdshcym-github-io';
       /* * * DON'T EDIT BELOW THIS LINE * * */
       (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
<footer class="footer">
  <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
  <p>
    Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:dsdshcym &lt;at&gt; gmail &lt;dot&gt; com">Yiming Chen</a>
    &nbsp;&nbsp;-&nbsp;&nbsp;
    Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
    <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
  </p>
</footer>

  </body>
</html>
