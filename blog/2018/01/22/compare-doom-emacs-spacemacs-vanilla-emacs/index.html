<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>Compare Doom-emacs, Spacemacs, and vanilla Emacs - Yiming Chen</title>
  <meta charset="utf-8" />
  <meta name="author" content="Yiming Chen" />
  <meta name="keywords" content="Emacs, Doom-emacs, Spacemacs, Editor" />

  <link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">
  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/posts.css" type="text/css">
  <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

  <script src="/media/js/main.js"></script>
</head>

  <body class="container">
<header id="header">
    <body>
        <nav class="navbar navbar-default navbar-fixed-top" style="opacity: .9" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">Yiming Chen</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/clipping/">Clipping</a></li>
                        <li><a href="/tags/">Tags</a></li>
                        <li><a href="/about/">About</a></li>
                        <li><a href="https://github.com/dsdshcym">GitHub</a></li>
                        <li><a href="/rss.xml">RSS</a></li>
                        <li><a href="https://webring.xxiivv.com/#random">Webring</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </body>
</header>

<section id="content" role="main">
    <div id="outline-container-sec-" class="row" style="padding-top: 70px">
        <div class="col-md-2"></div>
            <h1>Compare Doom-emacs, Spacemacs, and vanilla Emacs</h1>
            <p>
I've been using Emacs for about 3 years. Within these 3 years, I used different
configurations and frameworks:
</p>
<dl class="org-dl">
<dt>Spacemacs (v0.50 to v0.200)</dt><dd><span class="timestamp-wrapper"><span class="timestamp">[2015-01-04 Sun]&#x2013;[2017-07-25 Tue]</span></span></dd>
<dt>My vanila .emacs.d</dt><dd><span class="timestamp-wrapper"><span class="timestamp">[2017-07-25 Tue]&#x2013;[2017-12-26 Tue]</span></span></dd>
<dt>Spacemacs (v0.300)</dt><dd><span class="timestamp-wrapper"><span class="timestamp">[2017-12-26 Tue]&#x2013;[2018-01-04 Thu]</span></span></dd>
<dt>My customized Doom-emacs</dt><dd><span class="timestamp-wrapper"><span class="timestamp">[2018-01-04 Thu]&#x2013;[2018-01-22 Mon] </span></span> (Now)</dd>
</dl>

<p>
I think I can write some of my thoughts on these 3 different kind of frameworks
and it might be helpful for someone out there.
</p>

<div id="outline-container-orgcdbb08f" class="outline-2">
<h2 id="orgcdbb08f">Spacemacs</h2>
<div class="outline-text-2" id="text-orgcdbb08f">
<p>
IMHO, Spacemacs was and still is the best Emacs+Evil distribution, it's just not
suit me anymore.
</p>
</div>
<div id="outline-container-org6b691f1" class="outline-3">
<h3 id="org6b691f1">Best Emacs+Evil distribution</h3>
<div class="outline-text-3" id="text-org6b691f1">
<ol class="org-ol">
<li>When I started using Spacemacs, I've been using Vim for about 1 year and I
just wanted to use org-mode while still keeping my Vim experiences. There
were few distributions providing this kind of full Vim-like using experience
out there. Spacemacs did this by providing the <code>evilify</code> macros and
automatically bind as many Vim keybindings as possible.</li>
<li>Spacemacs had and still has the best documentations for learning Emacs,
evil-mode, writing layers.</li>
</ol>
</div>
</div>
<div id="outline-container-orgc5a5c4f" class="outline-3">
<h3 id="orgc5a5c4f">Why I'm leaving Spacemacs</h3>
<div class="outline-text-3" id="text-orgc5a5c4f">
<ol class="org-ol">
<li><p>
Spacemacs is getting overwhelmed by more and more users.
</p>

<p>
Spacemacs is a pretty popular Emacs distributions now, which also means there
are more and more Spacemacs users who have little Emacs experience and cannot
debug issues by themselves.
</p>

<ol class="org-ol">
<li>Spacemacs now has 1642 opening issues and it's been like this for a long
time, even after several rounds of Autumnal Cleanup.
<ul class="org-ul">
<li>It's a project that's pretty difficult to maintain by a few people now
(thanks to these maintainers!).</li>
<li>I also helped in Spacemacs Autumnal Cleanup 2015<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>. There were
already many issues then and it was pretty difficult to even check every
issues. Some of them were caused by broken packages, some of them were
questions, some of them were feature requests.</li>
</ul></li>
<li>Another drawback caused by its popularity is that <b>the new stable release
takes longer time</b>.
<ul class="org-ul">
<li>The last stable release (v0.200.8) was released 10 months ago.</li>
<li>The next stable release number is v0.300.0, which will break many things
compared to current master branch.</li>
<li>Since there are a lot of users using Spacemacs now, it's hard to release
a new stable version with many break changes. The master branch becomes
inactive now.</li>
<li>Although I can use <code>develop</code> branch, but it's not stable enough and I
need to check updates manually every now and then.</li>
</ul></li>
</ol></li>
<li>I started building my own layers instead of using the default ones
<ul class="org-ul">
<li>After learning Emacs for 3 years, I've realized that the main point of
using Emacs is to build a text editor that suits my personal needs
perfectly.</li>
<li><p>
Spacemacs is used by many users so it cannot be a personal configuration.
</p>
<ol class="org-ol">
<li>I don't like some keybindings defined in some layer, so I need to
reset them again.</li>
<li>I don't need some packages provided by a layer I'm using (e.g.
<code>evil-escape</code>), so I need to exclude them.</li>
<li><p>
Although it's the best evil distribution, it's still not enough
sometimes.
</p>
<blockquote>
<p>
For example, no layer is setting <code>evil-declare-ignore-repeat</code>
so that the unrepeatable commands or commands that's not editing the
texts like <code>save-buffer</code>, <code>rspec-rerun</code> are interfering with the repeat
commands list.
</p>
</blockquote></li>
</ol>
<p>
So I started building my own layers instead of using the default one, my
customization to Spacemacs becomes another heavy Emacs configuration. The
point of using Spacemacs to share a reasonable configuration with the
Spacemacs community has lost its sense to me.
</p></li>
</ul></li>
<li><p>
<b>Spacemacs is not a good Emacs configuration framework yet</b>
</p>

<p>
The next thing I need to consider is <i>whether Spacemacs is a good framework
to build my own configuration on</i>. Unfortunately, the answer is <i>no</i>.
</p>
<ol class="org-ol">
<li>Although the layer system was designed to separate different features,
they are still coupled within the current system.
<ol class="org-ol">
<li><p>
package loading coupling
</p>

<p>
Take <code>spacemacs|use-package-add-hook</code> for example, I have a layer called
<code>post-config</code> to customize some packages behavior, this hook system
doesn't work very well:
</p>
<div class="org-src-container">
<pre class="src src-elisp">(defun post-config/pre-init-company ()
  (spacemacs|use-package-add-hook
      company :post-config
      (define-key company-active-map (kbd "C-n") 'company-select-next)
      (define-key company-active-map (kbd "C-p") 'company-select-previous)
      (define-key company-active-map (kbd "C-w") 'evil-delete-backward-word)))
</pre>
</div>
<p>
If I want to add a <code>post-config</code> for <code>company</code>, I need to define a
<code>post-config/pre-init-company</code> function first, which doesn't make much
sense to me.
</p></li>
<li><p>
package config coupling
</p>

<p>
I have another post-config for <code>evil-lion</code>:
</p>
<div class="org-src-container">
<pre class="src src-elisp">(defun post-config/pre-init-evil-lion ()
  (spacemacs|use-package-add-hook evil-lion
    :pre-init
    (progn
      (evil-lion-mode)
      ;; overwrite spacemacs config for evil-lion to use gl and gL keybindings
      ;; for evil-lion
      nil)))
</pre>
</div>
<p>
I need to prevent Spacemacs' config for <code>evil-lion</code> to run to prevent
it to use the default evil-lion keybindings.
</p></li>
</ol></li>
<li><p>
The base ground is not clean enough (even with <code>spacemacs-base</code>)
</p>

<p>
There are many packages I don't need from many layers. They do add some
improvements here and there, but also introduce bugs/performance issues
here and there.
</p>

<p>
I ended up with excluding ~50 packages from my Spacemacs. Then I think,
why not just install what I need and build my personal emacs
configuration.
</p></li>
<li><p>
The performance is not the best
</p>

<p>
Spacemacs came out way before <code>use-package</code> came out, so many packages
were not lazy loaded properly. Although it's migrating to <code>use-package</code>,
it's still feels slow sometimes due to too many packages.
</p></li>
</ol></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org73da51d" class="outline-2">
<h2 id="org73da51d">My vanila emacs</h2>
<div class="outline-text-2" id="text-org73da51d">
<p>
Thanks to the evil packages extracted from Spacemacs or arose from the evil
community these years, I can get most of the Spacemacs experience by just adding
some packages<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>.
So I started building my own <code>.emacs.d</code><sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>, here are the pros and cons I found:
</p>
<ul class="org-ul">
<li>Pros
<ol class="org-ol">
<li>Performance is good.</li>
<li>Everything is configured by myself. So I know almost everything about it.</li>
<li>It's easy to test a new package and see if it suits me and my workflow.</li>
</ol></li>
<li>Cons
<ol class="org-ol">
<li><p>
There are a lot of <b>redundant works</b>.
</p>

<p>
I learned Emacs basically by using Spacemacs and I'm quite familiar with the
Space key as the leader key style keybindings. So I used <a href="https://github.com/noctuid/general.el">general</a><sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup> to
set these leader keys.
</p>

<p>
Most of the time, I was just copying config from Spacemacs and modify a
little bit.
</p></li>
<li><p>
There are a lot of <b>maintenance works</b> to do.
</p>

<p>
Since I need to keep my <code>.emacs.d</code> under version control and I tend to keep
commits small, sometimes it's easy to get it out of control. (I still have
12 unstaged files on my local machine in this directory.)
</p>

<p>
Aside from this maintenance burden, it's also harder to build a better Vim
experience without the help of spacemacs helper functions/macros like
<code>evilify-state</code>.
</p></li>
<li><p>
It's just time consuming.
</p>

<p>
I want to put most of my free time on coding, reading, writing, instead of
giving it back to emacs. So I started to looking for better frameworks to
build upon.
</p></li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org2d0fc3a" class="outline-2">
<h2 id="org2d0fc3a">doom-emacs</h2>
<div class="outline-text-2" id="text-org2d0fc3a">
<p>
Luckily, doom-emacs is a great configuration that I can easily customize and
extend. Here are the pros and cons I found:
</p>
<ul class="org-ul">
<li>Pros
<ol class="org-ol">
<li><p>
Performance is the best.
</p>

<p>
With the optimizations<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup> done by hlissner, doom-emacs (~3s) starts way faster
than Spacemacs (~12s) or my <code>.emacs.d</code> (~8s). And it feels snappier when
I'm using it.
</p></li>
<li><p>
Upstream updates frequently
</p>

<p>
The maintainer of doom-emacs, hlissner, commits and pushes his changes
pretty often. (~100 commits per weekend) I learned a lot from reading his
code and asking for his advice on my PRs.
</p></li>
<li><p>
It's a more hard-core Emacs+Evil distribution
</p>

<p>
As it's said in its description, doom-emacs is <b>an Emacs configuration for
the stubborn martian vimmer</b>.
</p>

<p>
For example, <a href="https://github.com/hlissner/doom-emacs/blob/eef6ed3d11f8f721eb55593ae954fb4476b7cb8a/modules/feature/evil/config.el#L108"><code>+evil*fix-dabbrev-in-minibuffer</code></a> makes the evil ex commands
auto completion behavior more likes vim. And so many other evil patches
(sometimes I really wish they can become the default behavior of evil)
</p></li>
<li><p>
It's <b>a great framework to build upon</b>.
</p>

<p>
doom-emacs provides many macros making configuring emacs easier, like
<code>package!</code>, <code>def-package!</code>, <code>map!</code>, etc..
</p>

<p>
And one of the most important feature is that it lets user to bind the
keybindings, instead of providing a default one.
</p></li>
</ol></li>
<li>Cons
<ol class="org-ol">
<li><p>
The default keybindings are not very Spacemacy.
</p>

<p>
But since I only use it as a configuration framework, and build my own
modules upon its core. So I can take that.
</p></li>
<li><p>
Excluding packages is not easy.
</p>

<p>
Although doom-emacs provides <code>package!</code> macros, I still couldn't find a
easy way to exclude a package completely.
</p></li>
<li>Module ecosystem is not as good as Spacemacs</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-orgf71df63" class="outline-2">
<h2 id="orgf71df63">My final solution</h2>
<div class="outline-text-2" id="text-orgf71df63">
<p>
So I ended up with this solution: <b>maintaining my own fork of doom-emacs</b>.
</p>

<p>
I also tried to maintain my own fork of Spacemacs but failed because it's a
larger project and I was not very good at using Git at that time.
</p>

<p>
Maintaining my own fork lets me:
</p>
<ol class="org-ol">
<li>Exclude unneeded packages easily.</li>
<li>Fix issues quickly.</li>
<li>Merge optimizations from upstream easily.</li>
</ol>

<p>
Of course, at the same time, I'm also pushing my fixes for broken packages to
upstream and trying to make doom-emacs better.
</p>

<p>
As it was said, <b>your editor configuration is the biggest project in your
life</b><sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup>. I hope I can build an editor that suits me perfectly in this life.
And a million thanks to the maintainers of these great distributions!
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/syl20bnr/spacemacs/wiki/Autumnal-Cleanup-2015">Autumnal Cleanup 2015 · syl20bnr/spacemacs Wiki</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Like <a href="https://github.com/JorisE/evil-mu4e">JorisE/evil-mu4e: Evil keybindings for mu4e</a> and
<a href="https://github.com/jojojames/evil-collection">jojojames/evil-collection: A set of keybindings for evil-mode</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/dsdshcym/.emacs.d">dsdshcym/.emacs.d</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/noctuid/general.el">noctuid/general.el: More convenient key definitions in emacs</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/hlissner/doom-emacs/wiki/FAQ#how-is-dooms-startup-so-fast">FAQ - How is Doom’s startup so fast? · hlissner/doom-emacs Wiki</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="http://dsdshcym.github.io/clipping/2018/01/09/your-editor-configuration-is-the-biggest-project-in-your-life/">Your editor configuration is the biggest project in your life - dsdshome</a>
</p></div></div>


</div>
</div>
    </div>
</section>


    <div class="post-meta">
        <span title="post date" class="post-info">2018-01-22</span>
        <span title="last modification date" class="post-info">2018-01-25</span>
        <span title="tags" class="post-info"><a href="/tags/emacs/">Emacs</a></span>
        <span title="author" class="post-info">Yiming Chen</span>
    </div>
  <section>
    <h1>Comments</h1>
    <script src="https://utteranc.es/client.js"
      repo="dsdshcym/dsdshcym.github.io"
      issue-term="title"
      theme="github-light"
      crossorigin="anonymous"
      async>
    </script>
  </section>
<footer class="footer">
  <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> (<a href="http://orgmode.org">Org mode</a>)</p>
  <p>
    Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:dsdshcym &lt;at&gt; gmail &lt;dot&gt; com">Yiming Chen</a>
    &nbsp;&nbsp;-&nbsp;&nbsp;
    Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
    <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
  </p>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152951733-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-152951733-1');
</script>

  </body>
</html>
