<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>Book Review: 99 Bottles of OOP - dsdshome</title>
  <meta charset="utf-8" />
  <meta name="author" content="Yiming Chen" />
  <meta name="keywords" content="OOP, Object-Oriented, 99 Bottles of OOP, Sandi Metz, Katrina Owen" />

  <link rel="alternate" title="RSS Feed" href="/rss.xml" type="application/rss+xml">
  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/posts.css" type="text/css">
  <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

  <script src="/media/js/main.js"></script>
</head>

  <body class="container">
<header id="header">
    <body>
        <nav class="navbar navbar-default navbar-fixed-top" style="opacity: .9" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">dsdshome</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/blog/">Blog</a></li>
                        <li><a href="/clipping/">Clipping</a></li>
                        <li><a href="/tags/">Tags</a></li>
                        <li><a href="/about/">About</a></li>
                        <li><a href="https://github.com/dsdshcym">GitHub</a></li>
                        <li><a href="/rss.xml">RSS</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </body>
</header>

<section id="content" role="main">
    <div id="outline-container-sec-" class="row" style="padding-top: 70px">
        <div class="col-md-2"></div>
            <h1>Book Review: 99 Bottles of OOP</h1>
            <p>
I bought <a href="https://www.sandimetz.com/99bottles/">99 Bottles of OOP</a> (99 Bottles) right after its first sale
started (40% off until Dec 13th). Buy it now and I promise you that
you won't regret it.
</p>
<div id="outline-container-org7bca411" class="outline-2">
<h2 id="org7bca411">TL;DR</h2>
<div class="outline-text-2" id="text-org7bca411">
<p>
This book taught me how to do <a href="#org9b1dd67">step-by-step refactoring</a>.
</p>
</div>
</div>
<div id="outline-container-orged9bcdf" class="outline-2">
<h2 id="orged9bcdf">Connections with earlier books</h2>
<div class="outline-text-2" id="text-orged9bcdf">
</div>
<div id="outline-container-org1ac9b6b" class="outline-3">
<h3 id="org1ac9b6b"><a href="http://www.poodr.com/">Practical Object-Oriented Design in Ruby</a> (POODR)</h3>
<div class="outline-text-3" id="text-org1ac9b6b">
<p>
I wrote my review<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> for POODR several months ago and I said it was
the best book about Object-Oriented Design. This comment may need to
change since 99 Bottles comes out.
</p>

<p>
POODR is truly a wonderful book and it opens my mind to the messages
in the Object-Oriented world and helps me to finally switch my mindset
from a procedural one to a more object-oriented one.
</p>

<p>
What POODR lacks is a good example to demonstrate how to finally get
to a well designed application step by step. It does provides some
examples (like <code>Bicycle</code> and <code>Gear</code>), but it's still unclear how to
get these results.
</p>

<p>
99 Bottles basically takes most of the great ideas from POODR and puts
them together into a great example: Printing out lyrics for a song
(original requirement) and changing some parts of the lyrics (new
feature requirement).
</p>

<p>
In this example, the book explains how to do TDD and refactoring step
by step, then finally get a well-designed application.
</p>
</div>
</div>
<div id="outline-container-orgcdc5d3b" class="outline-3">
<h3 id="orgcdc5d3b"><a href="https://martinfowler.com/books/refactoring.html">Refactoring: Improving the Design of Existing Code</a></h3>
<div class="outline-text-3" id="text-orgcdc5d3b">
<p>
(I also wrote my review for Refactoring<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>)
</p>

<p>
In 99 Bottles, they directly mention a lot of Code Smell names and
Refactoring Techniques from the Refactoring book.
</p>

<p>
That's why I felt very familiar when reading this book. Because I had
already known the techniques from the Refactoring book. And 99 Bottles
provided more specific example (in Ruby) for these code smells and
refactoring techniques.
</p>

<p>
And more importantly, 99 Bottles taught me how to really apply the
step-by-step refactoring idea from the Refactoring book to my daily
work.
</p>

<p>
I used to think the step-by-step refactoring idea is too
time-consuming and not worth it. But 99 Bottles tells me that it's
important to land on a stable point every time when refactoring and
shows that it's easier to refactor in this way. So I tried this style
of refactoring and now I find I'm doing more tiny step refactorings in
my daily work.
</p>
</div>
</div>
<div id="outline-container-org61f28d4" class="outline-3">
<h3 id="org61f28d4"><a href="http://www.growing-object-oriented-software.com/">Growing Object-Oriented Software Guided by Tests</a></h3>
<div class="outline-text-3" id="text-org61f28d4">
<p>
(I wrote my review for GOOS<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup> as well)
</p>

<p>
GOOS taught me how to build a faster feedback loop via TDD. And it's
invaluable.
</p>

<p>
The problem with GOOS is that its example is a Java application and
seems to be pretty old.
</p>

<p>
99 Bottles provides this simple Ruby application example for us. And
it shows me how to do TDD in Ruby correctly.
</p>
</div>
</div>
</div>
<div id="outline-container-org2409c53" class="outline-2">
<h2 id="org2409c53">Simplicity Matters</h2>
<div class="outline-text-2" id="text-org2409c53">
<p>
First of all, 99 Bottles defines what is the best code:
</p>
<blockquote>
<p>
The best solution lies at <b>the sweet spot that represents the perfect
compromise between comprehension and changeability</b>
</p>
</blockquote>
<p>
So, the best solution needs to be
</p>
<ul class="org-ul">
<li>Concrete enough to be understood</li>
<li>Abstract enough to allow for change</li>
</ul>
<p>
We can then call this kind of solutions "simple". (which reminds me of
the talk about Simplicity given by Rich Hickey<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>)
</p>

<p>
Guided by this thinking, we can get the simplest code (Shameless
Green) to solve our current problem using TDD.
</p>

<p>
(Thanks to my previous reading on POODR, I wrote a similar solution to
Shameless Green in 30 mins)
</p>
</div>
<div id="outline-container-org1bf1145" class="outline-3">
<h3 id="org1bf1145">Test Driven Shameless Green</h3>
<div class="outline-text-3" id="text-org1bf1145">
<p>
So how to TDD the Shameless Green solution? Of course, we need to
follow the red/green/refactor cycle.
</p>
<ol class="org-ol">
<li>Write a failing test</li>
<li>Make Transformations<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup> to production code to make it more
generic, thus pass the test</li>
<li>Refactor</li>
</ol>

<p>
When making the test pass, we need to use simplest transformation to
pass the tests.
</p>

<p>
Since
</p>
<ol class="org-ol">
<li>We start our production code as concrete as possible (e.g.
returning <code>nil</code> at first)</li>
<li>Every transformation is making our production code more generic
(abstract)</li>
<li>We choose the simplest transformation every time (which make our
code more generic, but as less as possible to just pass the test)</li>
</ol>

<p>
The result we get would be both concrete enough and abstract enough.
(Shameless Green)
</p>
</div>
</div>
</div>
<div id="outline-container-orgd15852c" class="outline-2">
<h2 id="orgd15852c">Make the change easy first</h2>
<div class="outline-text-2" id="text-orgd15852c">
<p>
Then comes the most important part of this book: How to embrace
changes?
</p>

<p>
When a new feature requirement comes, all we need to do is to "make
the change easy first, then make the easy change" (by Kent Beck<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup>)
</p>

<p>
This is the exact strategy 99 bottles follows:
</p>
<ol class="org-ol">
<li>Refactor the code first based on the feature requirement</li>
<li>Make the easy change to achieve the new feature</li>
</ol>
</div>
</div>
<div id="outline-container-org9b1dd67" class="outline-2">
<h2 id="org9b1dd67"><a id="ID-9C9E9765-E74E-4E4D-9D6D-EBA38DF94947"></a>Step-by-step Refactoring</h2>
<div class="outline-text-2" id="text-org9b1dd67">
<p>
But how to refactor the code? 99 Bottles shows some great examples on
how to refactor our code confidently.
</p>

<p>
We need to:
</p>
<ol class="org-ol">
<li>Take small steps</li>
<li>Refactor under green</li>
<li>Seek stable landing points</li>
</ol>

<p>
A great exercise I learned from this book is that:
</p>
<blockquote>
<p>
<b>Only change 1 line of your code/test at a time, and keep your tests
passing.</b>
</p>
</blockquote>

<ul class="org-ul">
<li>1 line of code is the smallest possible step when changing our code
(if you can only change a word or a character, that would better)</li>
<li>There are some useful tips to keep your tests green while only
changing 1 line of your code, like
<ol class="org-ol">
<li>Returning a new value at the end of the method while still
keeping the old code untouched</li>
<li>Adding a new argument with a default value that lead to the old
conditional path.
<ul class="org-ul">
<li>We can pass in the new argument in the new test.</li>
<li>And the default value will keep the old tests passing.</li>
<li>Choose meaningful defaults like <code>:FIXME</code> when no other better
defaults can use.</li>
</ul></li>
</ol></li>
</ul>

<p>
Doing all this will make sure we are <b>only one <code>Undo</code> away from the
green code</b>. This makes the refactoring process no longer that
stressful and I think I can take any refactoring project down applying
this strategy.
</p>

<p>
I then take bigger steps after I'm more familiar with this style of
refactoring. But I'll always make sure that I can go back to green in
one step (by leveraging <code>git</code>).
</p>
</div>
</div>
<div id="outline-container-org7133b4b" class="outline-2">
<h2 id="org7133b4b">Fix the easy problems first</h2>
<div class="outline-text-2" id="text-org7133b4b">
<p>
Another important lesson I learned from this book is to <b>focus on the
easy problems first</b>.
</p>

<p>
Sometimes, a refactoring looks scary only because we are thinking too
many small refactorings at the same time.
</p>

<p>
All we need to do is to focus on the horizontal refactoring<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup> at our
hand and ignore the vertical refactorings we discover (or maybe take
notes down so that we can still remember them later).
</p>

<p>
After all the horizontal refactorings are done, the easy path will
appear by itself automatically.
</p>
</div>
</div>
<div id="outline-container-orgb9abdd8" class="outline-2">
<h2 id="orgb9abdd8">Summary</h2>
<div class="outline-text-2" id="text-orgb9abdd8">
<p>
There are still many topics discussed in this book that I didn't
mention in this post but they are all useful advice for developing
enjoyable software. They all help you write a better story with your
code.
</p>

<p>
More importantly, you'll fall in love with polymorphism after you read
this book. (I know I did.)
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="http://dsdshcym.github.io/blog/2017/05/12/my-review-of-POODR/">My Review of Practical Object-Oriented Design in Ruby - dsdshome</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="http://dsdshcym.github.io/blog/2017/04/09/review-of-refactoring-improving-the-design-of-existing-code/">Review of Refactoring: Improving the Design of Existing Code - dsdshome</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="http://dsdshcym.github.io/blog/2017/10/18/build-a-faster-feed-back-loop/">GOOS: Build a Faster Feedback Loop - dsdshome</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.infoq.com/presentations/Simple-Made-Easy">Simple Made Easy</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://8thlight.com/blog/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">The Transformation Priority Premise - 8th Light</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://twitter.com/KentBeck/status/250733358307500032">Kent Beck on Twitter: "for each desired change, make the change easy (warning: this may be hard), then make the easy change"</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.facebook.com/notes/kent-beck/dont-cross-the-beams-avoiding-interference-between-horizontal-and-vertical-refac/260531380646400/">Don't Cross the Beams: Avoiding Interference Between Horizontal and Vertical Refactorings</a>
</p></div></div>


</div>
</div>
    </div>
</section>


    <div class="post-meta">
        <span title="post date" class="post-info">2017-12-08</span>
        <span title="last modification date" class="post-info">2017-12-08</span>
        <span title="tags" class="post-info"><a href="/tags/book-review/">Book Review</a>, <a href="/tags/object-oriented/">Object-Oriented</a>, <a href="/tags/tdd/">TDD</a>, <a href="/tags/refactor/">Refactor</a></span>
        <span title="author" class="post-info">Yiming Chen</span>
    </div>
  <section>
    <h1>Comments</h1>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
       //var disqus_developer = 1;
       var disqus_identifier = "/blog/2017/12/08/book-review-99-bottles-of-oop";
       var disqus_url = "http://dsdshcym.github.io/blog/2017/12/08/book-review-99-bottles-of-oop";
       var disqus_shortname = 'dsdshcym-github-io';
       /* * * DON'T EDIT BELOW THIS LINE * * */
       (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
<footer class="footer">
  <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
  <p>
    Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:dsdshcym &lt;at&gt; gmail &lt;dot&gt; com">Yiming Chen</a>
    &nbsp;&nbsp;-&nbsp;&nbsp;
    Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
    <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
  </p>
</footer>

  </body>
</html>
